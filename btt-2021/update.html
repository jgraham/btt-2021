<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta charset="UTF-8" />
  <meta content="width=device-width" name="viewport" />
  <title>Browser Testing and Tools Update</title>
  <link rel="stylesheet" href="../Tools/Shower3-1/humaaans.css" />
  <!--
  <script src="../Tools/Shower3-1/shower.js"></script>
  -->
  <script src="../Tools/b6plus/b6plus.js"></script>
 </head>
 <body class="shower fade-in">

  <section class="comment">
   <p>This is a template for slides using the <a
   href="b6plus/" >b6+</a> JavaScript framework
   with a style based on <a
   href="https://humaaans.com/">Humaaans</a>. For <a
   href="b6plus-humaaans.html#manual" >usage instructions</a>, see at the
   end.</p>

   <p>To start the slide show, turn on JavaScript and press
   ‘A’. Return to the index by pressing ‘A’ or ‘Esc’. On a touch
   screen, use a 3-finger touch. Double click to open a specific
   slide.</p>
  </section>

  <div role=region aria-live=assertive>
    <!-- What a screen reader should say on leaving slide mode,
	 instead of the default ‘Stopped.’ -->
    Leaving presentation mode.
  </div>

  <section class="slide cover clear" id="start" aria-label="slide">
   <h1>Browser Testing and Tools Update</h1>
   <address>James Graham</address>
  </section>

  <section class="slide" id="about" aria-label="slide">
   <h2>About Browser Testing and Tools</h2>
   <ul>
    <li>Specifications for interacting with web browsers</li>
    <li>Focus is enabling testing of web applications</li>
   </ul>
  </section>

  <section class="slide" id="why" aria-label="slide">
   <h2>Why Should I Care?</h2>
   <ul>
    <li>Modern websites are often complex applications</li>
    <li>For the web to be a compelling platform it must be easy to create reliable webapps</li>
    <li>This requires testing across multiple browser engines</li>
    <li><a href="https://insights.developer.mozilla.org/reports/mdn-web-developer-needs-assessment-2020.html#needs-assessment-top-ten-needs">MDN Developer Needs Assessment 2021</a> rated "Testing across browsers" as the #4 pain point</li>
   </ul>
  </section>

  <section class="slide" id="history" aria-label="slide">
   <h2>History: WebDriver</h2>
   <ul>
    <li>Specification for automation</li>
    <li>Focus is on end to end testing that simulates user interactions</li>
    <li>Protocol is simple command / response
      <ul>
        <li>Transport layer is JSON-over-HTTP</li>
        <li>Easy to write synchronous client code</li>
      </ul>
    </li>
    <li>Rec since 2018, widely implemented</li>
   </ul>
  </section>

  <section class="slide" id="problems" aria-label="slide">
   <h2>WebDriver Problems</h2>
   <ul>
    <li>Modern webapps have a lot of internal state
      <ul>
        <li>Ongoing network requests, js exectution, storage, etc.</li>
      </ul>
    </li>
    <li>Mismatch between concurrency inside browser and synchronous automation makes writing stable tests hard</li>
    <li>Test authors want access to webapp internal data
      <ul>
        <li>Console logs</li>
        <li>Network traffic</li>
      </ul>
    </li>
    <li>These requirements don't map well onto the WebDriver design.</li>
  </section>

a  <section class="slide" id="meanwhile" aria-label="slide">
   <h2>Meanwhile</h2>
   <ul>
     <li>Modern automation tools have started to use browser-specific protocols to provide low level control</li>
     <li>This means users have to choose between cross-browser testing and advanced functionality</li>
   </ul>
  </section>

  <section class="slide" id="bidi" aria-label="slide">
   <h2>Current Work: WebDriver BiDi</h2>
   <ul>
     <li>BiDirectional protocol for browser automation
       <ul>
         <li>Browser can send events to automation tools as well and handle commands</li>
         <li>Transport layer is JSON=over-WebSockets</li>
       </ul>
     </li>
     <li>Allows automation tools to respond to events inside the browser engine</li>
     <li>Lower-level than WebDriver
       <ul>
         <li>Not so tied to end-to-end testing</li>
         <li>Interact with all browsing context and realms, not just one active context</li>
       </ul>
     </li>
     <li>Compatible with WebDriver: easy to transition</li>
   </ul>
  </section>

  <section class="slide" id="status" aria-label="slide">
   <h2>WebDriver BiDi: Status</h2>
   <ul>
     <li>Working draft includes:
       <ul>
         <li>Console log events</li>
         <li>Navigation</li>
       </ul>
     </li>
     <li>Next up:
       <ul>
         <li>Script execution (and sandbox / isolated world)</li>
         <li>Network request monitoring and interception</li>
         <li>etc.</li>
       </ul>
     </li>
     <li><a href="https://github.com/w3c/webdriver-bidi/">https://github.com/w3c/webdriver-bidi/</a></li>
   </ul>
  </section>

  <section class="slide" id="wpt" aria-label="slide">
   <h2>Bonus Material: web-platform-tests</h2>
   <ul>
     <li>web-platform-tests uses WebDriver:
       <ul>
         <li>For runner</li>
         <li>For testdriver APIs</li>
       </ul>
     </li>
     <li>Lower level BiDi protocol means more features for authors e.g.
       <ul>
         <li>Inspect network traffic</li>
         <li>Communicate between browsing context groups</li>
         <li>Other features that don't fit into WebDriver model</li>
       </ul>
     </li>
   </ul>
  </section>

  <section class="slide final clear" id="Thanks" aria-label="slide">
   <h2>Thanks</h2>
   <ul>
     <li><code>#webdriver</code> on irc.w3.org (or matrix bridge)</li>
     <li><a href="https://github.com/w3c/webdriver-bidi/">w3c/webdriver-bidi</a> on GitHub</li>
   </ul>
  </section>
 </body>
</html>
